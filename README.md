
<center><div align="center">

<img src="Images/Icons/icon.png" width = 256 height = 256 /></img>
# å­¦ä¸é€š
### ä¸€äººç­¾åˆ°ï¼Œå…¨å¯ç¡è§‰
</div></center>


## è½¯ä»¶åŠŸèƒ½
- åªéœ€1äººå³å¯ä»£ç­¾näºº, å¸®åŠ©åŒä½¿ç”¨æœ¬è½¯ä»¶çš„åŒç­åŒå­¦ç­¾åˆ°
- å¯é€‰çš„ä»£ç­¾ç”Ÿæ•ˆè¯¾ç¨‹, è‡ªåŠ¨è¯†åˆ«åŒç­åŒå­¦
- æ”¯æŒç­¾åˆ°ç /äºŒç»´ç /æ‰‹åŠ¿/ä½ç½®(å¯è‡ªé€‰)/æ™®é€šç­¾åˆ°
- æ”¯æŒç»•è¿‡ç­¾åˆ°æ»‘å—äººæœºéªŒè¯ç 
- ç”¨æˆ·ç™½åå•æœºåˆ¶(éœ€æ‰‹åŠ¨åœ¨UserPermæ·»åŠ )
- æä¾› `Webå‰ç«¯ç‰ˆæœ¬` ä»¥åŠ `Flutterå®¢æˆ·ç«¯` ç‰ˆæœ¬

## æŠ€æœ¯æ ˆ
- å‰ç«¯: Vue, Vite, Pinia, Vue Router, Varlet, JS & TS
- å®¢æˆ·ç«¯: Flutter, Dart, Dio
- åç«¯: Python, Flask, Mysql

## å®æœºæˆªå± - Web
| **ç­¾åˆ°ä¸»é¡µ** | **é€‰è¯¾é…ç½®é¡µ** | **ç”¨æˆ·è®¾ç½®é¡µ** | **ç™»å½•é¡µ** |
|:---:|:---:|:---:|:---:|
|<div align="center"> <img src="Images/w1.jpg">|<div align="center"> <img src="Images/w2.jpg">|<div align="center"> <img src="Images/w3.jpg">|<div align="center"> <img src="Images/w10.jpg">|
| **æ™®é€šç­¾åˆ°** | **æ‰‹åŠ¿ç­¾åˆ°** | **ä½ç½®ç­¾åˆ°** | **ç­¾åˆ°ç ç­¾åˆ°** |
|<div align="center"> <img src="Images/w4.jpg">|<div align="center"> <img src="Images/w5.jpg">|<div align="center"> <img src="Images/w6.jpg">|<div align="center"> <img src="Images/w7.jpg">|
| **äºŒç»´ç ç­¾åˆ°** | **ç­¾åˆ°ç»“æœé¡µ** |
|<div align="center"> <img src="Images/w8.jpg">|<div align="center"> <img src="Images/w9.jpg">|

## å®æœºæˆªå± - Android
| **ç­¾åˆ°ä¸»é¡µ** | **é€‰è¯¾é…ç½®é¡µ** | **ç”¨æˆ·è®¾ç½®é¡µ** | **ç™»å½•é¡µ** |
|:---:|:---:|:---:|:---:|
|<div align="center"> <img src="Images/f1.jpg">|<div align="center"> <img src="Images/f2.jpg">|<div align="center"> <img src="Images/f3.jpg">|<div align="center"> <img src="Images/f10.jpg">|
| **æ™®é€šç­¾åˆ°** | **æ‰‹åŠ¿ç­¾åˆ°** | **ä½ç½®ç­¾åˆ°** | **ç­¾åˆ°ç ç­¾åˆ°** |
|<div align="center"> <img src="Images/f4.jpg">|<div align="center"> <img src="Images/f5.jpg">|<div align="center"> <img src="Images/f6.jpg">|<div align="center"> <img src="Images/f7.jpg">|
| **äºŒç»´ç ç­¾åˆ°** | **ç­¾åˆ°ç»“æœé¡µ** |
|<div align="center"> <img src="Images/f8.jpg">|<div align="center"> <img src="Images/f9.jpg">|

## äº¤æµåé¦ˆ
å–œæ¬¢æœ¬é¡¹ç›®çš„è¯ï¼Œæ±‚ç‚¹äº®StarğŸ™
- [QQç¾¤: 250369908](https://qm.qq.com/cgi-bin/qm/qr?k=yxbcu6vNZm3JvJElnCRHGbMgmNOADF6H&jump_from=webapi&authKey=+4fa+h7XTvKdeECaauj7wEFLOhVAkrtFNUh0VMcC3bP8eAeUqiXwctprZJOFHfkh)
- [Telegram: XueBT](https://t.me/XueBT)


## é£Ÿç”¨æ–¹æ³•
> æœ¬æ•™ç¨‹ç¨æœ‰éš¾åº¦ï¼Œ**éœ€ä¸€å®šçš„è®¡ç®—æœºåŸºç¡€**ï¼Œå¦‚æŠ±ç€â€œä¸‹è½½ç›´æ¥ç”¨â€, â€œç½‘ä¸Šæ‰¾ä¸ªèµ„æºåœˆé’±â€çš„å¿ƒæ€é˜…è¯»æ­¤è¯´æ˜ï¼Œå¯ä»¥æ´—æ´—ç¡äº†ã€‚

### å¼€å§‹å‰å‡†å¤‡
éƒ¨ç½²ä½¿ç”¨æœ¬é¡¹ç›®éœ€æœ‰ï¼š
- å…¬ç½‘IPçš„äº‘æœåŠ¡å™¨
- è§£æå‘æœåŠ¡å™¨çš„åŸŸåï¼ˆä¸­å›½å¤§é™†éœ€å…ˆå¤‡æ¡ˆï¼‰
- SSLè¯ä¹¦(Webè°ƒç”¨æ‘„åƒå¤´APIæ‰«ç å¿…é¡»è¦å¼€å¯Https)

### å…¬ç§é’¥ç”Ÿæˆ
å› æ¶‰åŠåˆ°è´¦å·å¯†ç ç½‘ç»œä¼ è¾“ï¼Œå¼€å§‹å‰éœ€å…ˆç”Ÿæˆè‡ªå·±çš„å…¬ç§é’¥å¯¹

- é¦–å…ˆä½ çš„ç”µè„‘ä¸­éœ€è¦å®‰è£…å¥½Pythonç¯å¢ƒ
- å®‰è£…pycryptodomeåº“ `pip install pycryptodome`
- è¿è¡Œ `/Tools/genKey.py` è‡ªåŠ¨ç”Ÿæˆå…¬ç§é’¥å¯¹
- ç”Ÿæˆå¥½çš„å…¬é’¥ä½äº `Client/assets/keys/public.pem`, `Server/keys/public.pem` å’Œ `Web/public/keys/public.pem` ä¸­
- ç”Ÿæˆå¥½çš„ç§é’¥ä½äº `Server/keys/private.pem` ä¸­
- æ£€æŸ¥å®ƒä»¬æ˜¯å¦æˆåŠŸç”Ÿæˆï¼Œå¹¶å¦¥å–„ä¿ç®¡ç§é’¥ï¼Œä»¥é˜²æ³„æ¼

---

### å‰ç«¯éƒ¨ç½²
å®¢æˆ·ç«¯ç›¸å…³æ–‡ä»¶å‡åœ¨ `/Web` æ–‡ä»¶å¤¹ä¸‹

#### ä¿®æ”¹é…ç½®
å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶åœ¨ `src/config.example.js` ä¸­ï¼Œå¤åˆ¶(Duplicate)ä¸€ä»½å¹¶é‡å‘½åä¸º `config.js` ä½¿ç”¨æŒ‰ç…§æ³¨é‡Šä¸é¢„è®¾çš„æ ¼å¼ä¿®æ”¹å³å¯ã€‚

#### config.example.js
```
// è½¯ä»¶ç‰ˆæœ¬å·
export const config_version = "1.1.0";

// åç«¯åœ°å€
export const config_baseURL = "https://api.xbt.example.com";

// ç­¾åˆ°é¢„è®¾ä½ç½®ï¼Œç»çº¬åº¦å¯ä»¥ä»https://api.map.baidu.com/lbsapi/getpoint/è·å–
// descriptionä¸ºæ•™å¸ˆç«¯æ˜¾ç¤ºçš„ä½ç½®ä¿¡æ¯ï¼Œå¯ä»¥è‡ªå·±åœ¨å­¦ä¹ é€šåˆ›å»ºç­çº§ä½œä¸ºæ•™å¸ˆè´¦å·ï¼Œå‘å¸ƒä½ç½®ç­¾åˆ°->é€‰æ‹©ä½ç½®ç•Œé¢æŸ¥çœ‹
// nameä¸ºå®¢æˆ·ç«¯ä½ç½®ç¼©å†™ï¼Œå¯è‡ªè¡Œå‘½å
export const config_locationPreset = [
  {"name": "ä¸€å·æ•™å­¦æ¥¼", "lng": '104.195155', "lat": '30.654549', "description": "æˆéƒ½å¸‚é¾™æ³‰é©¿åŒºXA03æˆéƒ½å¤§å­¦-ç¬¬ä¸€æ•™å­¦æ¥¼"},
  {"name": "äºŒå·æ•™å­¦æ¥¼", "lng": '104.195676', "lat": '30.655039', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦-ç¬¬äºŒæ•™å­¦æ¥¼"},
  {"name": "ä¸‰å·æ•™å­¦æ¥¼", "lng": '104.196078', "lat": '30.655429', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦-ç¬¬ä¸‰æ•™å­¦æ¥¼"},
  {"name": "å››å·æ•™å­¦æ¥¼", "lng": '104.196734', "lat": '30.656081', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦-ç¬¬å››æ•™å­¦æ¥¼"},
  {"name": "äº”å·æ•™å­¦æ¥¼", "lng": '104.197228', "lat": '30.656462', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦-ç¬¬äº”æ•™å­¦æ¥¼"},
  {"name": "å…­å·æ•™å­¦æ¥¼", "lng": '104.197875', "lat": '30.656959', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦-ç¬¬å…­æ•™å­¦æ¥¼"},
  {"name": "ä¸ƒå·æ•™å­¦æ¥¼", "lng": '104.198023', "lat": '30.655774', "description": "æˆéƒ½å¸‚é¾™æ³‰é©¿åŒºè‡´è¿œè·¯æˆéƒ½å¤§å­¦ç¬¬ä¸ƒæ•™å­¦æ¥¼"},
  {"name": "å…«å·æ•™å­¦æ¥¼", "lng": '104.198719', "lat": '30.659048', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦-ç¬¬å…«æ•™å­¦æ¥¼"},
  {"name": "ä¹å·æ•™å­¦æ¥¼", "lng": '104.198724', "lat": '30.661448', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºåé™µä¸Šè¡—1å·æˆéƒ½å¤§å­¦-ç¬¬ä¹æ•™å­¦æ¥¼"},
  {"name": "åå·æ•™å­¦æ¥¼", "lng": '104.20096', "lat": '30.662395', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦-ç¬¬10æ•™å­¦æ¥¼"},
  {"name": "åä¸€å·æ•™å­¦æ¥¼", "lng": '104.203835', "lat": '30.661696', "description": "æˆéƒ½å¸‚é¾™æ³‰é©¿åŒºé”¦åŸåŒ—è·¯æˆéƒ½å¤§å­¦æˆéƒ½å¤§å­¦11å·æ•™å­¦æ¥¼"},
  {"name": "åäºŒå·æ•™å­¦æ¥¼", "lng": '104.204001', "lat": '30.661094', "description": "æˆéƒ½å¸‚é¾™æ³‰é©¿åŒºé”¦åŸåŒ—è·¯æˆéƒ½å¤§å­¦æˆéƒ½å¤§å­¦-12å·æ•™å­¦æ¥¼"},
  {"name": "åä¸‰å·æ•™å­¦æ¥¼", "lng": '104.205932', "lat": '30.661044', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºåé™µè¡—é“æˆéƒ½å¤§å­¦-åŒ—åŒºæˆéƒ½å¤§å­¦13å·æ•™å­¦æ¥¼"},
  {"name": "åå››å·æ•™å­¦æ¥¼", "lng": '104.206233', "lat": '30.661611', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºè¥¿æ²³è¡—é“æˆéƒ½å¤§å­¦-åŒ—åŒºæˆéƒ½å¤§å­¦14å·æ•™å­¦æ¥¼"},
  {"name": "åäº”å·æ•™å­¦æ¥¼", "lng": '104.20459', "lat": '30.663545', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºåé™µè¡—é“å‹è°Šä¸œè·¯å¤§è¿æ‘å®¤å¤–ç¯®çƒåœº"},
  {"name": "åå…­å·æ•™å­¦æ¥¼", "lng": '104.206206', "lat": '30.663366', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦15æ ‹å¯¹é¢æˆéƒ½å¤§å­¦-æ©™å›­16èˆ"},
  {"name": "åä¸ƒå·æ•™å­¦æ¥¼", "lng": '104.207141', "lat": '30.663568', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦ç»¼åˆæ¥¼æˆéƒ½å¤§å­¦æ–¯ç‰¹çµå­¦é™¢-é˜…è§ˆå®¤"},
  {"name": "åå…«å·æ•™å­¦æ¥¼", "lng": '104.207922', "lat": '30.663389', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºé”¦åŸåŒ—è·¯æˆéƒ½å¤§å­¦æˆéƒ½å¤§å­¦å®¿èˆ-18æ ‹"}
];

```

#### æ‰“åŒ…
- å®‰è£…ä¾èµ– `npm i`
- æœ¬åœ°æµ‹è¯• `npm run dev`
- æ‰“åŒ…dist `npm run build`

---

### å®¢æˆ·ç«¯éƒ¨ç½²
å®¢æˆ·ç«¯ç›¸å…³æ–‡ä»¶å‡åœ¨ `/Client` æ–‡ä»¶å¤¹ä¸‹

#### ä¿®æ”¹é…ç½®
å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶åœ¨ `lib/config.example.dart` ä¸­ï¼Œå¤åˆ¶(Duplicate)ä¸€ä»½å¹¶é‡å‘½åä¸º `config.dart` ä½¿ç”¨æŒ‰ç…§æ³¨é‡Šä¸é¢„è®¾çš„æ ¼å¼ä¿®æ”¹å³å¯ã€‚

#### config.example.dart
```
// è½¯ä»¶ç‰ˆæœ¬å·
String version = "1.1.0";

// åç«¯åœ°å€
String config_baseURL = "https://api.xbt.example.com";

// ç­¾åˆ°é¢„è®¾ä½ç½®ï¼Œç»çº¬åº¦å¯ä»¥ä»https://api.map.baidu.com/lbsapi/getpoint/è·å–(ç™¾åº¦åæ ‡ç³»)
// descriptionä¸ºæ•™å¸ˆç«¯æ˜¾ç¤ºçš„ä½ç½®ä¿¡æ¯ï¼Œå¯ä»¥è‡ªå·±åœ¨å­¦ä¹ é€šåˆ›å»ºç­çº§ä½œä¸ºæ•™å¸ˆè´¦å·ï¼Œå‘å¸ƒä½ç½®ç­¾åˆ°->é€‰æ‹©ä½ç½®ç•Œé¢æŸ¥çœ‹
// nameä¸ºå®¢æˆ·ç«¯ä½ç½®ç¼©å†™ï¼Œå¯è‡ªè¡Œå‘½å
List<Map<String, dynamic>> config_locationPreset = [
  {"name": "ä¸€å·æ•™å­¦æ¥¼", "lng": '104.195155', "lat": '30.654549', "description": "æˆéƒ½å¸‚é¾™æ³‰é©¿åŒºXA03æˆéƒ½å¤§å­¦-ç¬¬ä¸€æ•™å­¦æ¥¼"},
  {"name": "äºŒå·æ•™å­¦æ¥¼", "lng": '104.195676', "lat": '30.655039', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦-ç¬¬äºŒæ•™å­¦æ¥¼"},
  {"name": "ä¸‰å·æ•™å­¦æ¥¼", "lng": '104.196078', "lat": '30.655429', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦-ç¬¬ä¸‰æ•™å­¦æ¥¼"},
  {"name": "å››å·æ•™å­¦æ¥¼", "lng": '104.196734', "lat": '30.656081', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦-ç¬¬å››æ•™å­¦æ¥¼"},
  {"name": "äº”å·æ•™å­¦æ¥¼", "lng": '104.197228', "lat": '30.656462', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦-ç¬¬äº”æ•™å­¦æ¥¼"},
  {"name": "å…­å·æ•™å­¦æ¥¼", "lng": '104.197875', "lat": '30.656959', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦-ç¬¬å…­æ•™å­¦æ¥¼"},
  {"name": "ä¸ƒå·æ•™å­¦æ¥¼", "lng": '104.198023', "lat": '30.655774', "description": "æˆéƒ½å¸‚é¾™æ³‰é©¿åŒºè‡´è¿œè·¯æˆéƒ½å¤§å­¦ç¬¬ä¸ƒæ•™å­¦æ¥¼"},
  {"name": "å…«å·æ•™å­¦æ¥¼", "lng": '104.198719', "lat": '30.659048', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦-ç¬¬å…«æ•™å­¦æ¥¼"},
  {"name": "ä¹å·æ•™å­¦æ¥¼", "lng": '104.198724', "lat": '30.661448', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºåé™µä¸Šè¡—1å·æˆéƒ½å¤§å­¦-ç¬¬ä¹æ•™å­¦æ¥¼"},
  {"name": "åå·æ•™å­¦æ¥¼", "lng": '104.20096', "lat": '30.662395', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦-ç¬¬10æ•™å­¦æ¥¼"},
  {"name": "åä¸€å·æ•™å­¦æ¥¼", "lng": '104.203835', "lat": '30.661696', "description": "æˆéƒ½å¸‚é¾™æ³‰é©¿åŒºé”¦åŸåŒ—è·¯æˆéƒ½å¤§å­¦æˆéƒ½å¤§å­¦11å·æ•™å­¦æ¥¼"},
  {"name": "åäºŒå·æ•™å­¦æ¥¼", "lng": '104.204001', "lat": '30.661094', "description": "æˆéƒ½å¸‚é¾™æ³‰é©¿åŒºé”¦åŸåŒ—è·¯æˆéƒ½å¤§å­¦æˆéƒ½å¤§å­¦-12å·æ•™å­¦æ¥¼"},
  {"name": "åä¸‰å·æ•™å­¦æ¥¼", "lng": '104.205932', "lat": '30.661044', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºåé™µè¡—é“æˆéƒ½å¤§å­¦-åŒ—åŒºæˆéƒ½å¤§å­¦13å·æ•™å­¦æ¥¼"},
  {"name": "åå››å·æ•™å­¦æ¥¼", "lng": '104.206233', "lat": '30.661611', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºè¥¿æ²³è¡—é“æˆéƒ½å¤§å­¦-åŒ—åŒºæˆéƒ½å¤§å­¦14å·æ•™å­¦æ¥¼"},
  {"name": "åäº”å·æ•™å­¦æ¥¼", "lng": '104.20459', "lat": '30.663545', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºåé™µè¡—é“å‹è°Šä¸œè·¯å¤§è¿æ‘å®¤å¤–ç¯®çƒåœº"},
  {"name": "åå…­å·æ•™å­¦æ¥¼", "lng": '104.206206', "lat": '30.663366', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦15æ ‹å¯¹é¢æˆéƒ½å¤§å­¦-æ©™å›­16èˆ"},
  {"name": "åä¸ƒå·æ•™å­¦æ¥¼", "lng": '104.207141', "lat": '30.663568', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºæˆæ´›å¤§é“2025å·æˆéƒ½å¤§å­¦ç»¼åˆæ¥¼æˆéƒ½å¤§å­¦æ–¯ç‰¹çµå­¦é™¢-é˜…è§ˆå®¤"},
  {"name": "åå…«å·æ•™å­¦æ¥¼", "lng": '104.207922', "lat": '30.663389', "description": "å››å·çœæˆéƒ½å¸‚é¾™æ³‰é©¿åŒºé”¦åŸåŒ—è·¯æˆéƒ½å¤§å­¦æˆéƒ½å¤§å­¦å®¿èˆ-18æ ‹"}
];

```

#### æ‰“åŒ…
- `flutter build apk --release` æ‰“åŒ…å®‰å“å®¢æˆ·ç«¯

---

### åç«¯éƒ¨ç½²
åç«¯ç›¸å…³æ–‡ä»¶å‡åœ¨ `/Server` æ–‡ä»¶å¤¹ä¸‹

#### Mysql åˆå§‹åŒ–
> æ³¨ï¼šMysqlä¸­çš„ `UserPerm` è¡¨ä¸ºç”¨æˆ·æƒé™è¡¨ï¼Œç›®å‰ä½œç”¨ä»…ä¸ºå®ç°ç™½åå•ï¼Œä½ éœ€è¦ç»™æ¯ä¸ªéœ€è¦ä½¿ç”¨æœ¬é¡¹ç›®çš„åŒå­¦æ·»åŠ è¿›ç™½åå•ï¼ŒæŠŠTaçš„æ‰‹æœºå·å¡«å…¥ `mobile` å­—æ®µï¼Œç„¶åå°† `permission` å­—æ®µè®¾ä¸º1å³å¯ã€‚

Mysql åˆå§‹åŒ–æ–‡ä»¶åœ¨ `Server/xbt.sql` ä¸­ï¼Œåœ¨ä½ çš„Mysqlä¸­åˆ›å»ºä¸€ä¸ªåä¸ºxbt(ä½ è‡ªå·±å‘½åä¹Ÿå¯ä»¥ï¼Œåç«¯é…ç½®æ–‡ä»¶ä¸­å¯ä»¥é…ç½®)çš„åº“å¹¶è¿è¡Œæ­¤æ–‡ä»¶ã€‚

#### xbt.sql
```
SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for CourseInfo
-- ----------------------------
DROP TABLE IF EXISTS `CourseInfo`;
CREATE TABLE `CourseInfo` (
  `classId` bigint NOT NULL,
  `courseId` bigint NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `teacher` varchar(255) DEFAULT NULL,
  `icon` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  PRIMARY KEY (`classId`,`courseId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- ----------------------------
-- Table structure for SignInfo
-- ----------------------------
DROP TABLE IF EXISTS `SignInfo`;
CREATE TABLE `SignInfo` (
  `activeId` bigint NOT NULL,
  `startTime` bigint DEFAULT NULL,
  `endTime` bigint DEFAULT NULL,
  `signType` int DEFAULT NULL,
  `ifRefreshEwm` tinyint DEFAULT NULL,
  PRIMARY KEY (`activeId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- ----------------------------
-- Table structure for SignRecord
-- ----------------------------
DROP TABLE IF EXISTS `SignRecord`;
CREATE TABLE `SignRecord` (
  `uid` bigint NOT NULL,
  `activeId` bigint NOT NULL,
  `source` bigint NOT NULL COMMENT '>0(uid)-1(auto)',
  `signTime` bigint NOT NULL,
  PRIMARY KEY (`uid`,`activeId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- ----------------------------
-- Table structure for UserCourse
-- ----------------------------
DROP TABLE IF EXISTS `UserCourse`;
CREATE TABLE `UserCourse` (
  `uid` bigint NOT NULL,
  `classId` bigint NOT NULL,
  `courseId` bigint NOT NULL,
  `isSelected` tinyint NOT NULL,
  PRIMARY KEY (`uid`,`classId`,`courseId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- ----------------------------
-- Table structure for UserInfo
-- ----------------------------
DROP TABLE IF EXISTS `UserInfo`;
CREATE TABLE `UserInfo` (
  `uid` bigint NOT NULL COMMENT 'userId',
  `name` varchar(255) DEFAULT NULL,
  `mobile` varchar(255) DEFAULT NULL,
  `token` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `avatar` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`uid`),
  UNIQUE KEY `mobile` (`mobile`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- ----------------------------
-- Table structure for UserPerm
-- ----------------------------
DROP TABLE IF EXISTS `UserPerm`;
CREATE TABLE `UserPerm` (
  `mobile` bigint NOT NULL,
  `permission` tinyint DEFAULT NULL,
  PRIMARY KEY (`mobile`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

SET FOREIGN_KEY_CHECKS = 1;

```

#### å®‰è£…ä¾èµ–
åœ¨ `/Server` ä¸­æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œ `pip install -r requirements.txt` å®‰è£…åç«¯ä¾èµ–

#### requirements.txt
```
beautifulsoup4
cryptography
DBUtils
ddddocr
Flask
pycryptodome
pyexecjs
PyMySQL
pyquery
Requests

```

#### ä¿®æ”¹é…ç½®
åç«¯é…ç½®æ–‡ä»¶åœ¨ `mysql.example.json` ä¸­ï¼Œå¤åˆ¶(Duplicate)ä¸€ä»½å¹¶é‡å‘½åä¸º `mysql.json` ä½¿ç”¨æŒ‰ç…§æ³¨é‡Šä¸é¢„è®¾çš„æ ¼å¼ä¿®æ”¹å³å¯ã€‚

#### mysql.example.json
```
{
  "host": "example.com",
  "port": 3306,
  "user": "root",
  "passwd": "114514",
  "db": "xbt",
  "charset": "utf8mb4",
  "maxconnections": 8
}
```

#### è¿è¡Œ
ä½¿ç”¨ `python ./index.py` å³å¯è¿è¡Œï¼ŒæœåŠ¡å°†å¼€æ”¾äº3030ç«¯å£

#### è·¨åŸŸåä»£
ç”±äºPythonåç«¯å¹¶æ²¡æœ‰è¿›è¡ŒCORSç›¸å…³é…ç½®ï¼Œéœ€åä»£è§£å†³ï¼ˆä»¥Nginxä¸ºä¾‹ï¼‰
```conf
# HTTP åˆ° HTTPS é‡å®šå‘
server {
    listen 80;
    # æ›¿æ¢ä¸ºä½ çš„åŸŸå
    server_name api.xbt.example.com;
    return 301 https://$host$request_uri;
}

# API åç«¯é…ç½®
server {
    listen 443 ssl;
    # æ›¿æ¢ä¸ºä½ çš„åŸŸå
    server_name api.xbt.example.com;

    # SSL è¯ä¹¦è·¯å¾„ï¼ˆéœ€æ›¿æ¢ä¸ºå®é™…è·¯å¾„ï¼‰
    ssl_certificate /home/ubuntu/Nginx/keys/api.crt;
    ssl_certificate_key /home/ubuntu/Nginx/keys/api.key;

    # å¯é€‰çš„ SSL é…ç½®ä¼˜åŒ–
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_prefer_server_ciphers on;
    ssl_ciphers EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH;

    location / {
        proxy_pass http://localhost:3030;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        fastcgi_buffers 256 128k;
        chunked_transfer_encoding off;
        # pythonæ²¡æœ‰å¤„ç†è·¨åŸŸé—®é¢˜ï¼Œè¿™é‡Œåä»£å¤„ç†, æ·»åŠ  CORS å¤´
        add_header 'Access-Control-Allow-Origin' '*' always;
        add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE' always;
        add_header 'Access-Control-Allow-Headers' 'DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Token,Version' always;

        # å¤„ç† OPTIONS é¢„æ£€è¯·æ±‚
        if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Allow-Origin' '*' always;
            add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE' always;
            add_header 'Access-Control-Allow-Headers' 'DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Token,Version' always;
            add_header 'Content-Length' 0;
            return 204;
        }
    }
}
```

---

## å…è´£å£°æ˜
æœ¬é¡¹ç›®ä»…ä½œä¸ºäº¤æµå­¦ä¹ ä½¿ç”¨ï¼Œé€šè¿‡æœ¬é¡¹ç›®åŠ æ·±ç½‘ç»œé€šä¿¡ã€æ¥å£ç¼–å†™ã€äº¤äº’è®¾è®¡ç­‰æ–¹é¢çŸ¥è¯†çš„ç†è§£ï¼Œè¯·å‹¿ç”¨ä½œå•†ä¸šç”¨é€”ï¼Œä»»ä½•äººæˆ–ç»„ç»‡ä½¿ç”¨é¡¹ç›®ä¸­ä»£ç è¿›è¡Œçš„ä»»ä½•è¿æ³•è¡Œä¸ºä¸æœ¬äººæ— å…³ã€‚å¦‚æœ‰è§¦åŠç›¸å…³å¹³å°è§„å®šæˆ–è€…æƒç›Šï¼Œçƒ¦è¯·è”ç³»æˆ‘åˆ é™¤ã€‚         

## å¼€æºåè®®

æœ¬è½¯ä»¶éµå¾ª `GPLv3` å¼€æºåè®®ï¼Œä»¥ä¸‹ä¸ºè¯¥åè®®å†…å®¹è§£è¯»æ‘˜è¦:

* å¯è‡ªç”±å¤åˆ¶ ä½ å¯ä»¥å°†è½¯ä»¶å¤åˆ¶åˆ°ä½ çš„ç”µè„‘ï¼Œä½ å®¢æˆ·çš„ç”µè„‘ï¼Œæˆ–è€…ä»»ä½•åœ°æ–¹ã€‚å¤åˆ¶ä»½æ•°æ²¡æœ‰ä»»ä½•é™åˆ¶
* å¯è‡ªç”±åˆ†å‘ åœ¨ä½ çš„ç½‘ç«™æä¾›ä¸‹è½½ï¼Œæ‹·è´åˆ°Uç›˜é€äººï¼Œæˆ–è€…å°†æºä»£ç æ‰“å°å‡ºæ¥ä»çª—æˆ·æ‰”å‡ºå»ï¼ˆç¯ä¿èµ·è§ï¼Œè¯·åˆ«è¿™æ ·åšï¼‰ã€‚
* å¯ä»¥ç”¨æ¥ç›ˆåˆ© ä½ å¯ä»¥åœ¨åˆ†å‘è½¯ä»¶çš„æ—¶å€™æ”¶è´¹ï¼Œä½†ä½ å¿…é¡»åœ¨æ”¶è´¹å‰å‘ä½ çš„å®¢æˆ·æä¾›è¯¥è½¯ä»¶çš„ GNU GPL è®¸å¯åè®®ï¼Œä»¥ä¾¿è®©ä»–ä»¬çŸ¥é“ï¼Œä»–ä»¬å¯ä»¥ä»åˆ«çš„æ¸ é“å…è´¹å¾—åˆ°è¿™ä»½è½¯ä»¶ï¼Œä»¥åŠä½ æ”¶è´¹çš„ç†ç”±ã€‚
* å¯è‡ªç”±ä¿®æ”¹ å¦‚æœä½ æƒ³æ·»åŠ æˆ–åˆ é™¤æŸä¸ªåŠŸèƒ½ï¼Œæ²¡é—®é¢˜ï¼Œå¦‚æœä½ æƒ³åœ¨åˆ«çš„é¡¹ç›®ä¸­ä½¿ç”¨éƒ¨åˆ†ä»£ç ï¼Œä¹Ÿæ²¡é—®é¢˜ï¼Œå”¯ä¸€çš„è¦æ±‚æ˜¯ï¼Œä½¿ç”¨äº†è¿™æ®µä»£ç çš„é¡¹ç›®ä¹Ÿå¿…é¡»ä½¿ç”¨ GPL åè®®ã€‚
* å¦‚æœæœ‰äººå’Œæ¥æ”¶è€…ç­¾äº†åˆåŒæ€§è´¨çš„ä¸œè¥¿ï¼Œå¹¶æä¾›è´£ä»»æ‰¿è¯ºï¼Œåˆ™æˆæƒäººå’Œä½œè€…ä¸å—æ­¤è´£ä»»è¿å¸¦ã€‚